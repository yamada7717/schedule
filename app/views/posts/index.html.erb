<%= render "shared/header"%>

<div class="container">
  <div class="flash">
    <% if flash[:notice] %>
    <p class="notice"><%= flash[:notice] %></p>
    <% end %>
  </div>

  <div class="d-flex justify-content-between">
    <h2 class="PageTitle__text">予定一覧</h2>
    <%= link_to "新規登録", :new_post, class:"btn btn-outline-primary pt-2" %>
  </div>

  <div class="table-responsive TableResponsive">
    <table class="table Table">
      <thead>
        <tr>
          <th>ID</th>
          <th>タイトル</th>
          <th>開始日</th>
          <th>終了日</th>
          <th>終日</th>
          <th>更新日時</th>
        </tr>
      </thead>

      <tbody>
      <% @posts.each do |post| %>
        <tr>
          <td><%=post.id %></td>
          <td><%=post.title %></td>
          <td><%=post.start_date&.strftime('%Y/%m/%d') %></td>
          <td><%=post.end_date&.strftime('%Y/%m/%d') %></td>
          <td>
          <% if post.all_day == true %>
          <strong>⚪︎</strong>
          <% end %>
          </td>
          <td><%= post.updated_at.to_s(:datetime_jp) %></td>
          <td><%= link_to "詳細", post %></td>
          <td><%= link_to "編集", [:edit, post] %></td>
          <td>
          <%= link_to "削除", post, method: :delete, data: { confirm: "本当に削除しますか？" } %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>

  <footer class="card Footer">
    <div class="card-body FooterBody">
      <p class="FooterBody__count">
        予定合計&nbsp;<%= @posts.count %>件
      </p>
      <p class="FooterBody__datetime">
        本日の日付&nbsp;<%= Date.today.strftime('%Y/%m/%d') %>
      </p>
    </div>
  </footer>
</div>
